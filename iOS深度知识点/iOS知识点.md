#iOS知识点

##多线程问题

- CPU的组成和运行机制?
- 进程为应用程序开辟内存空间?线程执行应用程序的代码?
- 如何保证线程安全?加锁吗?锁有那几种形式?分别的运用在哪里?互斥锁可能会造成线程锁死如何解决?


###多线程的优劣势

1.方便的通信和数据交换
- 同一进程下的线程之间共享数据空间

2.更高效的利用CPU
- 线程是CPU最小的调度单元,当开辟一个新线程时,CPU在自己调度链表中去循环调用这个线程

3.线程并非开启越多越好,线程消耗内存,主线程1M,子线程512k。其次，线程越多，CPU的线程链表就越长,执行效率就会变慢

###四种多线程的实现方式

1.PThreads(POSIX Threads)

- 从线程的创建(pthread_create)、终止（pthread_exit）、等待、分离、设置等操作，都要自己设置
- 线程安全:当多线程访问某个函数可能出错,那么该函数就不是线程安全的
 - 加入互斥量(互斥锁),在系统中不允许并行使用,是"排它性资源",它一次只能由一个执行流访问
 - 互斥锁是用来保护临界区的特殊变量,它可以处于锁定(locked)状态,也可以处于解锁(unlocked)状态

```OC
pthread_mutex_t mylock = PTHREAD_MUTEX_INITIALIZER;
pthread_mutex_lock(&mylock);
临界区代码
pthread_mutex_unlock(&mylock);
```

2.NSThread

- 需要自己管理线程生命周期

3.NSOperation

4.GCD

###参考文章

- [iOS－线程&&进程的深入理解](https://blog.csdn.net/yang198907/article/details/50621280)

###NSOperation

- 挂起,暂定,等待,依赖等关系

###线程和进程的区别

- **一个正在运行的App就是一个进程,一个进程至少一个线程,这个线程叫主线程**
- 线程是CPU调度的最小单位,一个单核CPU执行线程只能交替执行,为并发,而多核CPU可以同时执行多个线程,叫做并行

###并发和并行

- **并发是多个线程使用一个CPU,交替执行;并行是使用多个CPU,一个CPU执行一个线程互不干扰**
- 并发性是对有限物理资源强制使用多用户共享提高效率
- 在多道程序环境下,并行性使多个程序同一时刻可在不同CPU上同时执行,任务具体分配几个CPU运算是系统调度的


- 疑问:应当深入理解NSOPerationQueue和它的addDependency依赖关系

##防御型编程

###字符串问题

- stringByAppendingString链接nil会崩溃